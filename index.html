<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduMorph - Live Prototype</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #f8fafc; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gradient-text { background: linear-gradient(to right, #4ade80, #3b82f6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .card-hover:hover { transform: translateY(-2px); transition: all 0.2s ease; border-color: #3b82f6; }
        /* Animation classes */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .loader { border-top-color: #3498db; -webkit-animation: spinner 1.5s linear infinite; animation: spinner 1.5s linear infinite; }
        @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <nav class="w-full glass fixed top-0 z-50 px-6 py-4 flex justify-between items-center">
        <div class="text-2xl font-bold tracking-tighter">Edu<span class="gradient-text">Morph</span></div>
        <div class="text-xs text-slate-400 border border-slate-700 rounded-full px-3 py-1 hidden md:block">
            Prototype v1.0 â€¢ Running in Browser Mode
        </div>
    </nav>

    <main id="app" class="flex-grow pt-24 px-4 md:px-20 pb-10 flex flex-col items-center justify-center">
        </main>

    <script>
        // --- STATE MANAGEMENT ---
        const state = {
            step: 'onboarding', // onboarding, input, loading, results
            userClass: null,
            userBoard: null, // CBSE, ICSE, IGCSE
            query: '',
            activeTab: 'simple' // simple, visual, story, exam
        };

        // --- MOCKED "AI" DATABASE ---
        // This simulates what the Backend would send back based on the syllabus.
        const brain = {
            "newton's second law": {
                title: "Newton's Second Law of Motion",
                simple: "It's basically: **Force = Mass Ã— Acceleration**.<br><br>If you kick a football (light mass) and a bowling ball (heavy mass) with the same strength, the football goes faster. To make the heavy bowling ball move as fast as the football, you need way more kick (force).",
                visual: "Imagine a supermarket trolley.<br><br>ðŸ›’ <strong>Empty Trolley:</strong> Easy to push (Low Mass -> High Acceleration)<br>ðŸ›’ <strong>Full Trolley:</strong> Hard to push (High Mass -> Low Acceleration)<br><br>Formula Triangle: <strong>F</strong> on top, <strong>m</strong> and <strong>a</strong> on bottom.",
                story: "Imagine you are pushing a stalled car. If it's a tiny Nano, you and one friend can push it (Force is small, Mass is small). If it's a massive truck, you need 10 people to push it to get it moving at the same speed. The universe demands more 'payment' (Force) to move heavy things.",
                exam_cbse: "<strong>Q: A force of 5N gives a mass m1 an acceleration of 10 m/sÂ². What is the mass?</strong><br><br><em>Step 1:</em> F = ma<br><em>Step 2:</em> 5 = m Ã— 10<br><em>Step 3:</em> m = 5/10 = 0.5 kg.<br><br><strong>Tip:</strong> Don't forget to write 'kg' or you lose Â½ mark.",
                exam_icse: "<strong>Q: Define Newton's Second Law and derive F=ma.</strong><br><br>Rate of change of momentum is directly proportional to applied force.<br>F âˆ dp/dt => F = k(ma). In SI units, k=1."
            },
            "mitochondria": {
                title: "Mitochondria: The Cell",
                simple: "The **Powerhouse** of the cell. It takes the food you eat and turns it into energy (ATP) that your body can actually use. Without it, you'd be like a phone with no battery.",
                visual: "Think of a **Sausage Shape** inside a cell.<br><br>1. Outer membrane (Skin)<br>2. Inner membrane folded like a maze (Cristae)<br>3. Matrix (Liquid inside)<br><br>The folding increases surface area = More energy production!",
                story: "Think of your city. The Nucleus is the City Hall (Boss). The Mitochondria is the **Power Plant**. Coal comes in (Food), electricity goes out (ATP). If the power plant shuts down, the city goes dark (cell death).",
                exam_cbse: "<strong>Q: Why is mitochondria known as the powerhouse of the cell?</strong> (2 Marks)<br><br><strong>Ans:</strong> Because it performs cellular respiration to release energy in the form of ATP (Adenosine Triphosphate), which is used for various chemical activities.",
                exam_icse: "<strong>Q: Draw a well-labelled diagram of a Mitochondrion.</strong><br><br>Focus on: Cristae (F1 particles), Matrix, and Double Membrane nature."
            },
            // Fallback for demo purposes
            "default": {
                title: "Morphed Concept",
                simple: "This is a demo. In the real app, the AI would analyze your input and explain it simply here.",
                visual: "The AI would generate a text-based description of a diagram or a flow chart here.",
                story: "The AI would generate a relatable metaphor (like cricket, cooking, or gaming) to explain this topic.",
                exam_cbse: "The AI would generate NCERT-style questions based on Class 9 previous papers.",
                exam_icse: "The AI would generate ICSE-style rigorous definitions and derivations."
            }
        };

        // --- DOM ELEMENTS CONTAINER ---
        const app = document.getElementById('app');

        // --- RENDER FUNCTIONS ---

        function renderOnboarding() {
            app.innerHTML = `
                <div class="fade-in max-w-2xl w-full text-center">
                    <h1 class="text-4xl md:text-6xl font-extrabold mb-6">Let's set up your <br><span class="gradient-text">Learning Profile</span></h1>
                    <p class="text-slate-400 mb-10 text-lg">To give you the best explanations, EduMorph needs to know your syllabus.</p>
                    
                    <div class="glass p-8 rounded-2xl text-left border-t-4 border-green-400">
                        <label class="block text-sm font-bold text-slate-300 mb-2">WHICH CLASS ARE YOU IN?</label>
                        <div class="flex gap-4 mb-6">
                            <button onclick="selectClass(9)" id="btn-c9" class="flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-600 font-bold transition">Class 9</button>
                            <button onclick="selectClass(10)" id="btn-c10" class="flex-1 py-3 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-600 font-bold transition">Class 10</button>
                        </div>

                        <label class="block text-sm font-bold text-slate-300 mb-2">WHICH BOARD?</label>
                        <div class="grid grid-cols-3 gap-4 mb-8">
                            <button onclick="selectBoard('CBSE')" id="btn-cbse" class="py-3 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-600 font-bold transition">CBSE / NCERT</button>
                            <button onclick="selectBoard('ICSE')" id="btn-icse" class="py-3 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-600 font-bold transition">ICSE</button>
                            <button onclick="selectBoard('IGCSE')" id="btn-igcse" class="py-3 bg-slate-800 hover:bg-slate-700 rounded-lg border border-slate-600 font-bold transition">IGCSE</button>
                        </div>

                        <button onclick="goToInput()" id="btn-next" class="w-full py-4 bg-green-500 hover:bg-green-600 text-black font-extrabold rounded-xl text-lg transition opacity-50 cursor-not-allowed" disabled>
                            Start Learning &rarr;
                        </button>
                    </div>
                </div>
            `;
        }

        function renderInput() {
            const placeholder = state.userBoard === 'CBSE' ? 'e.g., Force, Tissues, Polynomials...' : 'e.g., Mole Concept, Civics...';
            
            app.innerHTML = `
                <div class="fade-in max-w-3xl w-full text-center">
                    <div class="inline-block px-4 py-1 rounded-full bg-slate-800 border border-slate-700 text-xs font-mono text-green-400 mb-6">
                        ACTIVE: CLASS ${state.userClass} â€¢ ${state.userBoard}
                    </div>
                    <h2 class="text-3xl font-bold mb-8">What are you stuck on?</h2>
                    
                    <div class="relative w-full">
                        <input type="text" id="queryInput" placeholder="${placeholder}" 
                            class="w-full bg-slate-900 border border-slate-700 rounded-2xl p-6 text-xl focus:outline-none focus:border-green-500 transition shadow-2xl"
                            onkeypress="handleEnter(event)">
                        <button onclick="processQuery()" class="absolute right-3 top-3 bottom-3 bg-blue-600 hover:bg-blue-500 px-8 rounded-xl font-bold transition">
                            Morph It
                        </button>
                    </div>

                    <div class="mt-8 flex justify-center gap-4 text-sm text-slate-500">
                        <span>Try typing:</span>
                        <span onclick="fillInput('Newton\'s Second Law')" class="cursor-pointer text-blue-400 hover:underline">Newton's Second Law</span>
                        <span onclick="fillInput('Mitochondria')" class="cursor-pointer text-blue-400 hover:underline">Mitochondria</span>
                    </div>
                </div>
            `;
        }

        function renderLoading() {
            app.innerHTML = `
                <div class="fade-in text-center">
                    <div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-16 w-16 mb-6 mx-auto"></div>
                    <h2 class="text-2xl font-bold mb-2">Morphing Concept...</h2>
                    <p class="text-slate-400" id="loading-text">Analyzing syllabus for ${state.userBoard} Class ${state.userClass}...</p>
                </div>
            `;
            
            // Simulate steps
            setTimeout(() => { document.getElementById('loading-text').innerText = "Simplifying language..."; }, 800);
            setTimeout(() => { document.getElementById('loading-text').innerText = "Generating visual analogies..."; }, 1600);
            setTimeout(() => { document.getElementById('loading-text').innerText = "Scanning past year papers..."; }, 2400);
            setTimeout(() => { renderResults(); }, 3200);
        }

        function renderResults() {
            // Find data in mock DB or use default
            const key = state.query.toLowerCase();
            let data = brain["default"];
            
            // Simple keyword matching
            if (key.includes("newton") || key.includes("force")) data = brain["newton's second law"];
            else if (key.includes("mitochondria") || key.includes("cell")) data = brain["mitochondria"];
            
            // Adjust exam content based on board
            let examContent = state.userBoard === 'ICSE' ? (data.exam_icse || data.exam_cbse) : data.exam_cbse;

            app.innerHTML = `
                <div class="fade-in w-full max-w-5xl">
                    <button onclick="goToInput()" class="mb-6 text-slate-400 hover:text-white text-sm">&larr; Ask another question</button>
                    
                    <div class="flex flex-col md:flex-row gap-6 items-start">
                        <div class="w-full md:w-1/3">
                            <div class="glass p-6 rounded-2xl sticky top-24">
                                <div class="text-green-400 font-mono text-xs uppercase tracking-widest mb-2">${state.userBoard} â€¢ Class ${state.userClass}</div>
                                <h1 class="text-3xl font-bold mb-4 leading-tight">${data.title}</h1>
                                <div class="h-1 w-20 bg-blue-500 rounded-full mb-6"></div>
                                <p class="text-slate-400 text-sm mb-6">This topic appears frequently in exams. Focus on the formula and definitions.</p>
                                
                                <div class="bg-slate-900 rounded-xl p-4 border border-slate-700">
                                    <div class="text-xs text-slate-500 uppercase mb-2">Confidence Level</div>
                                    <div class="flex items-center gap-2 mb-1">
                                        <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                                            <div class="bg-yellow-500 h-full w-[20%]"></div>
                                        </div>
                                        <span class="text-xs font-bold text-yellow-500">20%</span>
                                    </div>
                                    <div class="text-xs text-slate-400">Read the cards to boost score.</div>
                                </div>
                            </div>
                        </div>

                        <div class="w-full md:w-2/3">
                            <div class="flex gap-2 overflow-x-auto pb-2 mb-4">
                                <button onclick="switchTab('simple', this)" class="tab-btn active px-4 py-2 bg-blue-600 rounded-full text-sm font-bold whitespace-nowrap">Explain Simply</button>
                                <button onclick="switchTab('visual', this)" class="tab-btn px-4 py-2 bg-slate-800 border border-slate-700 hover:bg-slate-700 rounded-full text-sm font-bold whitespace-nowrap">Visual Mode</button>
                                <button onclick="switchTab('story', this)" class="tab-btn px-4 py-2 bg-slate-800 border border-slate-700 hover:bg-slate-700 rounded-full text-sm font-bold whitespace-nowrap">Real Life Story</button>
                                <button onclick="switchTab('exam', this)" class="tab-btn px-4 py-2 bg-slate-800 border border-slate-700 hover:bg-slate-700 rounded-full text-sm font-bold whitespace-nowrap">Exam Prep</button>
                            </div>

                            <div class="glass p-6 md:p-8 rounded-2xl min-h-[300px] relative border-t-4 border-blue-500">
                                <div id="tab-content" class="text-lg leading-relaxed text-slate-200">
                                    ${data.simple}
                                </div>
                            </div>

                            <div class="mt-6 grid grid-cols-2 gap-4">
                                <button class="p-4 rounded-xl bg-slate-800 border border-slate-700 hover:bg-slate-700 font-bold flex items-center justify-center gap-2">
                                    <span>ðŸ“¥</span> Download Worksheet
                                </button>
                                <button class="p-4 rounded-xl bg-green-600 hover:bg-green-500 text-black font-bold flex items-center justify-center gap-2">
                                    <span>âš¡</span> Take 2-min Quiz
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Save data for tab switching
            state.currentData = data;
        }

        // --- INTERACTION LOGIC ---

        function selectClass(c) {
            state.userClass = c;
            document.getElementById('btn-c9').classList.replace('bg-green-500', 'bg-slate-800');
            document.getElementById('btn-c9').classList.remove('text-black');
            document.getElementById('btn-c10').classList.replace('bg-green-500', 'bg-slate-800');
            document.getElementById('btn-c10').classList.remove('text-black');
            
            const btn = document.getElementById(`btn-c${c}`);
            btn.classList.remove('bg-slate-800');
            btn.classList.add('bg-green-500', 'text-black');
            checkNext();
        }

        function selectBoard(b) {
            state.userBoard = b;
            ['cbse', 'icse', 'igcse'].forEach(id => {
                const btn = document.getElementById(`btn-${id}`);
                btn.classList.remove('bg-blue-500', 'text-white');
                btn.classList.add('bg-slate-800');
            });
            const btn = document.getElementById(`btn-${b.toLowerCase()}`);
            btn.classList.remove('bg-slate-800');
            btn.classList.add('bg-blue-500', 'text-white');
            checkNext();
        }

        function checkNext() {
            if(state.userClass && state.userBoard) {
                const btn = document.getElementById('btn-next');
                btn.disabled = false;
                btn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function goToInput() {
            state.step = 'input';
            renderInput();
        }

        function fillInput(text) {
            document.getElementById('queryInput').value = text;
        }

        function handleEnter(e) {
            if(e.key === 'Enter') processQuery();
        }

        function processQuery() {
            const val = document.getElementById('queryInput').value;
            if(!val) return;
            state.query = val;
            state.step = 'loading';
            renderLoading();
        }

        function switchTab(tabName, btnElement) {
            // Reset buttons
            document.querySelectorAll('.tab-btn').forEach(b => {
                b.classList.remove('bg-blue-600');
                b.classList.add('bg-slate-800', 'border', 'border-slate-700');
            });
            // Highlight active
            btnElement.classList.remove('bg-slate-800', 'border', 'border-slate-700');
            btnElement.classList.add('bg-blue-600');

            // Change Content
            const contentDiv = document.getElementById('tab-content');
            let content = "";
            let data = state.currentData;

            // Fade out effect
            contentDiv.style.opacity = 0;
            setTimeout(() => {
                if(tabName === 'simple') content = data.simple;
                if(tabName === 'visual') content = data.visual;
                if(tabName === 'story') content = data.story;
                if(tabName === 'exam') content = state.userBoard === 'ICSE' ? (data.exam_icse || data.exam_cbse) : data.exam_cbse;
                
                contentDiv.innerHTML = content;
                contentDiv.style.opacity = 1;
            }, 200);
        }

        // Init
        renderOnboarding();

    </script>
</body>
</html>
